---
title: "Androidã®ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã‚’ã‚¿ãƒƒãƒ—ã—ã¦Activityã‚’èµ·å‹•ã—ãŸã„"
emoji: "ğŸ—‚"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [Android, Java, PendingIntent, Tech]
published: false
---

æœ¬è¨˜äº‹ã§ã¯Androidã‚¢ãƒ—ãƒªé–‹ç™ºã®ä¸­ã§ã‚‚ã€ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã«å¯¾ã—ã¦ã‚¿ãƒƒãƒ—æ™‚ã®å‹•ä½œã‚’ä»•è¾¼ã‚€æ–¹æ³•ã«ã¤ã„ã¦è¨˜è¼‰ã—ã¾ã™ã€‚ 
é–“é•ã„æŒ‡æ‘˜å¤§æ­“è¿ã§ã™

# çµè«–

ã‚„ã‚Šæ–¹ã¯ï¼’é€šã‚Šã‚ã‚Šã¾ã™ã€‚
1. getActivityã‚’ç”¨ã„ã¦PendingIntentã‚’ç™ºè¡Œã™ã‚‹
    ã“ã¡ã‚‰ã¯å˜ç´”ã«è‡ªåˆ†è‡ªèº«ã‚’èµ·å‹•ã•ã›ãŸã„ã¨ãã«ä¾¿åˆ©ã§ã™ã€‚

1. getBroadcastã‚’ç”¨ã„ã¦Broadcastã‚’å—ã‘å–ã£ã¦ã‹ã‚‰æ‰‹å‹•ã§Activityã‚’èµ·å‹•ã™ã‚‹
    ã“ã¡ã‚‰ã¯é€šçŸ¥ã‚’å‡ºã—ãŸã„ã€ãƒ–ãƒ©ã‚¦ã‚¶ã‚’é–‹ããŸã„ã¨ããªã©ã«ä½¿ãˆã¾ã™ã€‚
    ã‚‚ã¡ã‚ã‚“è‡ªåˆ†è‡ªèº«ã®èµ·å‹•ã‚‚å¯èƒ½ã§ã™ã€‚

ãã‚Œã§ã¯è§£èª¬ã—ã¾ã™ã€‚

# PendingIntent ã¨ã¯
Pendingã¯ __ä¿ç•™ä¸­__ ã¨ã„ã†æ„å‘³ã§ã™ã€‚  
ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã¯é€šå¸¸ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã¨ã¯ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãŒç•°ãªã‚Šã¾ã™ã€‚  
å…·ä½“çš„ã«ã¯ã€ãã®å‹•ä½œã‚’ã•ã›ãŸã„ã¨ãã«è‡ªèº«ãŒèµ·å‹•ã—ã¦ã„ãªã„ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚  
ãã‚“ãªçŠ¶æ…‹ã§ã‚‚æŒ‡å®šã—ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§å‹•ä½œã•ã›ã‚‹ãŸã‚ã«ã€å‰ã‚‚ã£ã¦ãã®å‹•ä½œã‚’ __ä¿ç•™__ ã•ã›ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

# PendingIntent.getActivity

[Android Developers](https://developer.android.com/reference/android/app/PendingIntent#getActivity(android.content.Context,%20int,%20android.content.Intent,%20int,%20android.os.Bundle))

è‡ªèº«ã®Activityã‚’èµ·å‹•ã•ã›ã‚‹ãŸã‚ã®Intentã‚’å‰ã‚‚ã£ã¦ä½œæˆã—Viewã«ä»•è¾¼ã¿ã¾ã™ã€‚

```java:SampleWidget.java
// create an intent to open the main activity
Intent intent = new Intent(context, MainActivity.class);
intent.setAction("ACTION_APPWIDGET_TAPPED");
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

// create a pending intent
PendingIntent pendingIntent = PendingIntent.getActivity(
        context,
        0,
        intent,
        PendingIntent.FLAG_IMMUTABLE);

// set the pending intent to the text view
views.setOnClickPendingIntent(
        R.id.appwidget_text,
        pendingIntent);
```

# PendingIntent.getBroadcast

[Android Developers](https://developer.android.com/reference/android/app/PendingIntent#getBroadcast(android.content.Context,%20int,%20android.content.Intent,%20int))

æš—é»™çš„ã‚¤ãƒ³ãƒ†ãƒ³ãƒˆã‚„ç‹¬è‡ªå®Ÿè£…(é€šçŸ¥ãªã©)ã‚’ä»•è¾¼ã¿ãŸã„ã¨ãã«ä½¿ç”¨ã—ã¾ã™ã€‚  
Broadcastã®IntentãŒç™ºè¡Œã•ã‚Œã‚‹ã‚ˆã†ã«ä¿ç•™ã—ã€onReceiveã§å—ã‘å–ã‚Šã¾ã™ã€‚ 

ä¾‹ã¨ã—ã¦ã€ãƒ–ãƒ©ã‚¦ã‚¶ã‚’èµ·å‹•ã™ã‚‹æµã‚Œã‚’èª¬æ˜ã—ã¾ã™

PendingIntentã‚’ä½¿ã£ã¦Broadcastã‚’ç™ºè¡Œã—ã¾ã™ã€‚  

```java:SampleWidget.java
// create intent to myself
Intent intent = new Intent(context, SampleWidget.class);
intent.setAction("ACTION_APPWIDGET_TAPPED");

// create a pending intent
PendingIntent pendingIntent = PendingIntent.getBroadcast(
        context,
        0,
        intent,
        PendingIntent.FLAG_IMMUTABLE);

// set the pending intent to the text view
views.setOnClickPendingIntent(
        R.id.appwidget_text,
        pendingIntent);
    
```

ç™ºè¡Œã—ãŸBroadcastã‚’ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆå´ã§å—ã‘å–ã‚Šã¾ã™ã€‚
```java:SampleWidget.java
// receive broadcast and open browser
@Override
public void onReceive(Context context, Intent intent) {
    super.onReceive(context, intent);

    // create an intent to open browser
    Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("https://example.com"));
    mainActivityIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

    // check if the broadcast is from the widget
    if (Objects.equals(intent.getAction(), "ACTION_APPWIDGET_TAPPED")) {
        context.startActivity(browserIntent);
    }
}
```

# ã¾ã¨ã‚
ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã«ã‚¿ãƒƒãƒ—æ™‚ã®å‹•ä½œã‚’ä»•è¾¼ã‚€æ–¹æ³•ã«ã¤ã„ã¦è§£èª¬ã—ã¾ã—ãŸã€‚  
getActivityã¨getBroadcastã€ç”¨é€”ã«åˆã‚ã›ã¦ä½¿ã„åˆ†ã‘ã¾ã—ã‚‡ã†ã€‚  

# å®£ä¼
ä»¥ä¸Šã®æ©Ÿèƒ½ã‚’ä½¿ã£ã¦ã€å˜ç´”ãªã‚¢ãƒ—ãƒªã‚’ä½œæˆã—ã¾ã—ãŸã€‚  
GitHubã®Issueä½œæˆç”»é¢ã«ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§é£›ã¶ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã§ã™ã€‚
ç§ã¯ã‚¿ã‚¹ã‚¯ç®¡ç†ã«ã‚‚GitHubã‚’ä½¿ã£ã¦ã„ã‚‹ã®ã§å¤§å¤‰æ—ã£ã¦ã„ã¾ã™ã€‚
![](/images/screen.gif)

ã”èˆˆå‘³ã®ã‚ã‚‹æ–¹ã¯ä»¥ä¸‹ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ã¿ã¦ãã ã•ã„ã€‚  
[![](/images/image.png =200x)](https://www.amazon.co.jp/gp/product/B0CR7TJ67S)
